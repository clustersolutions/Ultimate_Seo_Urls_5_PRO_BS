<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Upgrade from Ultimate Seo Urls 5 by FWR Media - ULTIMATE Seo Urls 5 PRO by FWR Media</title>
<link rel="stylesheet" type="text/css" href="../includes/style.css" />
</head>
<body>
<div id="container">
  <div id="header">
    <img style="padding: 0.6em; float: right;" src="../includes/fwrlogo.png" width="73" height="73" alt="FWR Media" />
    <span style="padding: 0.5em 0.5em 0.5em 1.5em; position: relative;  top: 1.6em;"><span id="fwrTitle1">Ultimate Seo Urls</span><span style="color: red; font-size: 24pt;"> 5</span><span id="fwrTitle2"> PRO</span><br /><span style="font-family: verdana; font-size: xx-small; color: #fff; padding-left: 3em; font-weight: bold;">Version 1.1.0</span></span>
  </div>
  <div id="inner_container">
    <h1>Upgrade from Ultimate Seo Urls 5 by FWR Media</h1>
    <p><strong>What about the database entries that USU5 put in my database?</strong></p>
    <p>You don't have to worry about these, USU5 PRO installs automatically and will intelligently remove any earlier versions of Ultimate Seo Urls from your database.</p>
    <h3>1) Delete directory catalog/includes/modules/ultimate_seo_urls5/</h3>
    <div style="color: red;">Please be aware that this action will temporarily cause your links not to work and will generate errors on your web shop until you have completed this page of modifications 
    ( should only take you a few minutes ).</div>
    <p>Delete the directory and all files within from your server.</p>
    <h3>2) Uploads directory</h3>
    <p>Upload the files and directories in the "uploads" directory to your server maintaining the directory structure of osCommerce.</p>
    <p>Please note that "catalog" refers to the root of your osCommerce install and probably won't actually exist.</p>
    <p><strong>Important: </strong> now ensure that the following two directories are writable. Dependent on your server this may be 0755 or 0777.</p>
    <ul>
      <li>catalog/includes/modules/ultimate_seo_urls5/cache_system/cache/</li>
      <li>catalog/includes/modules/ultimate_seo_urls5/cache_system/sqlite/</li>
    </ul>
    <p>Now upload the files in additional_uploads .. again, maintaining the osCommerce directory structure.<br />
      Upload the correct files as below.
    </p>
    <ul>
      <li>For osCommerce version 2.2 upload additional_uploads/version2.2/</li>
      <li>For osCommerce version 2.3 upload additional_uploads/version2.3/</li>
    </ul>
    <h3>3) catalog/index.php</h3>
    <p>Find ( this is within a block of code ) ...</p>
    <code><span style="color: #000000"><span style="color: #0000BB">tep_draw_form</span><span style="color: #007700">(</span><span style="color: #DD0000">'filter'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FILENAME_DEFAULT</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'get'</span><span style="color: #007700">)</span></span></code>
    <p>Replace with ...</p>
    <code><span style="color: #000000"><span style="color: #0000BB">tep_draw_form</span><span style="color: #007700">(</span><span style="color: #DD0000">'filter'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">tep_href_link</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">FILENAME_DEFAULT&nbsp;</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">'get'</span><span style="color: #007700">)</span></span></code>
    <h3>4) catalog/includes/functions/html_output.php</h3>
    <p>Find  ( complete function ) ...</p>
    <code><span style="color: #000000"><span style="color: #FF8000">////<br />//&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;by&nbsp;FWR&nbsp;Media<br />//&nbsp;The&nbsp;HTML&nbsp;href&nbsp;link&nbsp;wrapper&nbsp;function<br />&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">tep_href_link</span><span style="color: #007700">(</span><span style="color: #0000BB">$page&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$connection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'NONSSL'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$add_session_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$search_engine_safe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$seo_urls</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$languages_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$request_type</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$session_started</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sid</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$seo_urls</span><span style="color: #007700">)&nbsp;){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include_once&nbsp;</span><span style="color: #0000BB">DIR_WS_MODULES&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'ultimate_seo_urls5'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'classes'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'usu.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$seo_urls&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">usu</span><span style="color: #007700">(</span><span style="color: #0000BB">$languages_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$request_type</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$session_started</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sid</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$seo_urls</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">href_link</span><span style="color: #007700">(</span><span style="color: #0000BB">$page</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$connection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$add_session_id</span><span style="color: #007700">);<br />&nbsp;&nbsp;}</span></span></code>
    <p>Replace with ...</p>
    <code><span style="color: #000000">&nbsp;&nbsp;<span style="color: #FF8000">/**<br />&nbsp;&nbsp;*&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;PRO&nbsp;by&nbsp;FWR&nbsp;Media<br />&nbsp;&nbsp;*&nbsp;Replacement&nbsp;for&nbsp;osCommerce&nbsp;href&nbsp;link&nbsp;wrapper&nbsp;function<br />&nbsp;&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #007700">require_once&nbsp;</span><span style="color: #0000BB">DIR_WS_MODULES&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'ultimate_seo_urls5/main/usu5.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">tep_href_link</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$page&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$connection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'NONSSL'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$add_session_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$search_engine_safe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">Usu_Main</span><span style="color: #007700">::</span><span style="color: #0000BB">i</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">hrefLink</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$page</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$connection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$add_session_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$search_engine_safe&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;}</span></span></code>
    <h3>5) catalog/includes/application_top.php</h3>
    <p>Find ...</p>
    <code><span style="color: #000000"><span style="color: #0000BB">&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;*&nbsp;USU5&nbsp;function&nbsp;to&nbsp;return&nbsp;the&nbsp;base&nbsp;filename&nbsp;<br />&nbsp;&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">usu5_base_filename</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Probably&nbsp;won't&nbsp;get&nbsp;past&nbsp;SCRIPT_NAME&nbsp;unless&nbsp;this&nbsp;is&nbsp;reporting&nbsp;cgi&nbsp;location<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$base&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">ArrayIterator</span><span style="color: #007700">(&nbsp;array(&nbsp;</span><span style="color: #DD0000">'SCRIPT_NAME'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'REQUEST_URI'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ORIG_PATH_INFO'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'HTTP_X_ORIGINAL_URL'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'HTTP_X_REWRITE_URL'&nbsp;</span><span style="color: #007700">)&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(&nbsp;</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">valid</span><span style="color: #007700">()&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(&nbsp;&nbsp;</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$_SERVER&nbsp;</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;!empty(&nbsp;&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()]&nbsp;)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()],&nbsp;</span><span style="color: #DD0000">'.php'&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'@[a-z0-9_]+\.php@i'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()],&nbsp;</span><span style="color: #0000BB">$matches&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$matches&nbsp;</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$matches&nbsp;</span><span style="color: #007700">)&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;-</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #DD0000">'.php'&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">is_readable</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;)&nbsp;||&nbsp;(&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()],&nbsp;</span><span style="color: #DD0000">'ext/modules/'&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Some&nbsp;odd&nbsp;server&nbsp;set&nbsp;ups&nbsp;return&nbsp;/&nbsp;for&nbsp;SCRIPT_NAME&nbsp;and&nbsp;PHP_SELF&nbsp;when&nbsp;accessed&nbsp;as&nbsp;mysite.com&nbsp;(no&nbsp;index.php)&nbsp;where&nbsp;they&nbsp;usually&nbsp;return&nbsp;/index.php<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(&nbsp;(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'SCRIPT_NAME'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #DD0000">'/'&nbsp;</span><span style="color: #007700">)&nbsp;||&nbsp;(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #DD0000">'/'&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'index.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'USU5&nbsp;could&nbsp;not&nbsp;find&nbsp;a&nbsp;valid&nbsp;base&nbsp;filename,&nbsp;please&nbsp;inform&nbsp;the&nbsp;developer.'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">E_USER_WARNING&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;}&nbsp;</span><span style="color: #FF8000">//&nbsp;End&nbsp;function<br />//&nbsp;set&nbsp;php_self&nbsp;in&nbsp;the&nbsp;local&nbsp;scope<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$PHP_SELF&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">usu5_base_filename</span><span style="color: #007700">();</span></span></code>
    <p>Replace with ...</p>
    <code><span style="color: #000000"><span style="color: #FF8000">/**<br />&nbsp;&nbsp;*&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;PRO&nbsp;by&nbsp;FWR&nbsp;Media<br />&nbsp;&nbsp;*&nbsp;function&nbsp;to&nbsp;return&nbsp;the&nbsp;base&nbsp;filename&nbsp;<br />&nbsp;&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">usu5_base_filename</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Probably&nbsp;won't&nbsp;get&nbsp;past&nbsp;SCRIPT_NAME&nbsp;unless&nbsp;this&nbsp;is&nbsp;reporting&nbsp;cgi&nbsp;location<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$base&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">ArrayIterator</span><span style="color: #007700">(&nbsp;array(&nbsp;</span><span style="color: #DD0000">'SCRIPT_NAME'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'REQUEST_URI'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ORIG_PATH_INFO'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'HTTP_X_ORIGINAL_URL'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'HTTP_X_REWRITE_URL'&nbsp;</span><span style="color: #007700">)&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(&nbsp;</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">valid</span><span style="color: #007700">()&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(&nbsp;&nbsp;</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$_SERVER&nbsp;</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;!empty(&nbsp;&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()]&nbsp;)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()],&nbsp;</span><span style="color: #DD0000">'.php'&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'@[a-z0-9_]+\.php@i'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()],&nbsp;</span><span style="color: #0000BB">$matches&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$matches&nbsp;</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$matches&nbsp;</span><span style="color: #007700">)&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;-</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #DD0000">'.php'&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">is_readable</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;)&nbsp;)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$base</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Some&nbsp;odd&nbsp;server&nbsp;set&nbsp;ups&nbsp;return&nbsp;/&nbsp;for&nbsp;SCRIPT_NAME&nbsp;and&nbsp;PHP_SELF&nbsp;when&nbsp;accessed&nbsp;as&nbsp;mysite.com&nbsp;(no&nbsp;index.php)&nbsp;where&nbsp;they&nbsp;usually&nbsp;return&nbsp;/index.php<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(&nbsp;(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'SCRIPT_NAME'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #DD0000">'/'&nbsp;</span><span style="color: #007700">)&nbsp;||&nbsp;(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #DD0000">'/'&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'index.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Return&nbsp;the&nbsp;standard&nbsp;RC3&nbsp;code&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;(&nbsp;(&nbsp;(&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'cgi.fix_pathinfo'&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;(&nbsp;(bool)</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'cgi.fix_pathinfo'&nbsp;</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;||&nbsp;!isset(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'SCRIPT_NAME'</span><span style="color: #007700">]&nbsp;)&nbsp;)&nbsp;?&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">]&nbsp;)&nbsp;:&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'SCRIPT_NAME'</span><span style="color: #007700">]&nbsp;);<br />&nbsp;&nbsp;}&nbsp;</span><span style="color: #FF8000">//&nbsp;End&nbsp;function<br />//&nbsp;set&nbsp;php_self&nbsp;in&nbsp;the&nbsp;local&nbsp;scope<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$PHP_SELF&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">usu5_base_filename</span><span style="color: #007700">();</span></span></code>
    <p>Find and DELETE</p>
    <code><span style="color: #000000"><span style="color: #FF8000">//&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;by&nbsp;FWR&nbsp;Media<br />&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(&nbsp;!isset(</span><span style="color: #0000BB">$seo_urls</span><span style="color: #007700">)&nbsp;||&nbsp;!</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$seo_urls</span><span style="color: #007700">)&nbsp;){<br />&nbsp;&nbsp;&nbsp;&nbsp;include_once&nbsp;</span><span style="color: #0000BB">DIR_WS_MODULES&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'ultimate_seo_urls5'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'classes'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'usu.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$seo_urls&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">usu</span><span style="color: #007700">(</span><span style="color: #0000BB">$languages_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$request_type</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$session_started</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$SID</span><span style="color: #007700">);<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$seo_urls</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">initiate</span><span style="color: #007700">(</span><span style="color: #0000BB">$SID</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$languages_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$language</span><span style="color: #007700">);</span></span></code>
    <p>Find ...</p>
    <code><span style="color: #000000">
    <span style="color: #FF8000">//&nbsp;include&nbsp;the&nbsp;language&nbsp;translations
    <br />&nbsp;&nbsp;</span><span style="color: #007700">require(</span><span style="color: #0000BB">DIR_WS_LANGUAGES&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$language&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">);</span></span></code>
    <p>Add immediately <strong>ABOVE</strong> ...</p>
    <code><span style="color: #000000"><span style="color: #0000BB">&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;*&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;PRO&nbsp;by&nbsp;FWR&nbsp;Media<br />&nbsp;&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #0000BB">Usu_Main</span><span style="color: #007700">::</span><span style="color: #0000BB">i</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">setVar</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'languages_id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$languages_id&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setVar</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'request_type'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$request_type&nbsp;</span><span style="color: #007700">)&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setVar</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'session_started'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$session_started&nbsp;</span><span style="color: #007700">)&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setVar</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'sid'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$SID&nbsp;</span><span style="color: #007700">)&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setVar</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'language'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$language&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setVar</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'filename'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$PHP_SELF&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">initiate</span><span style="color: #007700">(&nbsp;(&nbsp;isset(&nbsp;</span><span style="color: #0000BB">$lng&nbsp;</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">$lng&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">language&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;?&nbsp;</span><span style="color: #0000BB">$lng&nbsp;</span><span style="color: #007700">:&nbsp;array(),&nbsp;</span><span style="color: #0000BB">$languages_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$language&nbsp;</span><span style="color: #007700">);</span></span></code>
    <h3>6) catalog/<b style="color: red;">ADMIN</b>/categories.php</h3>
    <p>Find ...</p>
    <code><span style="color: #000000"><span style="color: #007700">&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">tep_not_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$action</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;by&nbsp;FWR&nbsp;Media<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;the&nbsp;action&nbsp;will&nbsp;affect&nbsp;the&nbsp;cache&nbsp;entries<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'insert'&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'update'&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'setflag'&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tep_reset_cache_data_seo_urls</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'reset'&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code>
    <p>Replace with ...</p>
    <code><span style="color: #000000">&nbsp;&nbsp;<span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">tep_not_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$action</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;PRO&nbsp;by&nbsp;FWR&nbsp;Media<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;the&nbsp;action&nbsp;will&nbsp;affect&nbsp;the&nbsp;cache&nbsp;entries<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'insert'&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'update'&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'setflag'&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tep_reset_cache_data_usu5</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'reset'&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code>
    <h3>7) catalog/<b style="color: red;">ADMIN</b>/includes/functions/general.php</h3>
    <p>Find ( complete function ) ... </p>
    <code><span style="color: #000000"><span style="color: #FF8000">//&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;by&nbsp;FWR&nbsp;Media<br />//&nbsp;Reset&nbsp;the&nbsp;seo&nbsp;urls&nbsp;cache<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">tep_reset_cache_data_seo_urls</span><span style="color: #007700">(</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">){<br />&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'reset'&nbsp;</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DIR_FS_CATALOG&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIR_WS_MODULES&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'ultimate_seo_urls5'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;switch(&nbsp;</span><span style="color: #0000BB">SEO_URLS_CACHE_SYSTEM&nbsp;</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'FileSystem'</span><span style="color: #007700">:&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$path_to_cache&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">realpath</span><span style="color: #007700">(</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'cache'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$it&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DirectoryIterator</span><span style="color: #007700">(</span><span style="color: #0000BB">$path_to_cache</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">valid</span><span style="color: #007700">()&nbsp;){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDot</span><span style="color: #007700">()&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">is_readable</span><span style="color: #007700">(</span><span style="color: #0000BB">$path_to_cache&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilename</span><span style="color: #007700">())&nbsp;&amp;&amp;&nbsp;(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilename</span><span style="color: #007700">(),&nbsp;-</span><span style="color: #0000BB">6</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #DD0000">'.cache'</span><span style="color: #007700">)&nbsp;){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$path_to_cache&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilename</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'Database'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tep_db_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"TRUNCATE&nbsp;TABLE&nbsp;`usu_cache`"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'Memcached'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">class_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'Memcache'</span><span style="color: #007700">)&nbsp;){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include_once&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'interfaces'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'Interface_Cache.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include_once&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'classes'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'Usu_Cache_Memcached.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Usu_Cache_Memcached</span><span style="color: #007700">(</span><span style="color: #DD0000">'dummy'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flushOut</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tep_db_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"UPDATE&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">TABLE_CONFIGURATION&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"&nbsp;SET&nbsp;configuration_value='false'&nbsp;WHERE&nbsp;configuration_key='SEO_URLS_CACHE_RESET'"</span><span style="color: #007700">);<br />&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />}</span></span></code>
    <p>Replace with ..</p>
    <code><span style="color: #000000"><span style="color: #0000BB">&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;*&nbsp;ULTIMATE&nbsp;Seo&nbsp;Urls&nbsp;5&nbsp;PRO&nbsp;by&nbsp;FWR&nbsp;Media<br />&nbsp;&nbsp;*&nbsp;Reset&nbsp;the&nbsp;various&nbsp;cache&nbsp;systems<br />&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$action<br />&nbsp;&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">tep_reset_cache_data_usu5</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">$action&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'reset'&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">realpath</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">__FILE__&nbsp;</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'/../../../'&nbsp;</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'/'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIR_WS_MODULES&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'ultimate_seo_urls5/'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(&nbsp;</span><span style="color: #0000BB">USU5_CACHE_SYSTEM&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'file'</span><span style="color: #007700">:&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$path_to_cache&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'cache_system/cache/'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$it&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DirectoryIterator</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$path_to_cache&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">valid</span><span style="color: #007700">()&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDot</span><span style="color: #007700">()&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">is_readable</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$path_to_cache&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilename</span><span style="color: #007700">()&nbsp;)&nbsp;&amp;&amp;&nbsp;(&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilename</span><span style="color: #007700">(),&nbsp;-</span><span style="color: #0000BB">6&nbsp;</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #DD0000">'.cache'&nbsp;</span><span style="color: #007700">)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span style="color: #0000BB">unlink</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$path_to_cache&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilename</span><span style="color: #007700">()&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$it</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'mysql'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tep_db_query</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'TRUNCATE&nbsp;TABLE&nbsp;`usu_cache`'&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'memcache'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">class_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'Memcache'</span><span style="color: #007700">)&nbsp;){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'interfaces/cache_interface.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'cache_system/memcache.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Memcache_Cache_Module</span><span style="color: #007700">::</span><span style="color: #0000BB">iAdmin</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">initiate</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">flushOut</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'sqlite'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'interfaces/cache_interface.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;</span><span style="color: #0000BB">$usu5_path&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'cache_system/sqlite.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Sqlite_Cache_Module</span><span style="color: #007700">::</span><span style="color: #0000BB">admini</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">gc</span><span style="color: #007700">();&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tep_db_query</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">"UPDATE&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">TABLE_CONFIGURATION&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"&nbsp;SET&nbsp;configuration_value='false'&nbsp;WHERE&nbsp;configuration_key='USU5_RESET_CACHE'"&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;}&nbsp;</span><span style="color: #FF8000">//&nbsp;end&nbsp;function</span></span></code>
    <div style="padding: 0.5em;">
    <p>Thank you for donating, it allows us to spend more time developing free contributions for you to use.</p>
      <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
        <input type="hidden" name="cmd" value="_s-xclick" />
        <input type="hidden" name="hosted_button_id" value="L2MKTV24AC7WY" />
        <input type="image" src="https://www.paypal.com/en_GB/i/btn/btn_donate_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online." />
        <img alt="" border="0" src="https://www.paypal.com/en_GB/i/scr/pixel.gif" width="1" height="1" />
      </form>
    </div>
    <div style="padding: 1em;"><h2>Your installation is now complete!</h2>  please <a href="install_complete.htm">click here</a></div>
    <div style="padding: 0.5em;"></div>   
    <div id="fwrfooter"><a href="http://www.fwrmedia.co.uk" title="PHP - MySQL - osCommerce by FWR Media"> ... another script by FWR Media</a></div>
  </div>
</div>
</body>
</html>